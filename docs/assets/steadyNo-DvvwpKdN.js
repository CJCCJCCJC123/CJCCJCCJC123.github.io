import{_ as re}from"./mySvg-B11NfWQz.js";import"./base-BTlVFyY3.js";import{a as ce,E as de}from"./el-table-column-jIyZtn8y.js";import"./el-tag-DXIeNmkv.js";import{E as ue}from"./el-popover-3i-iI7UV.js";import{E as pe}from"./el-popconfirm-Pze42pU8.js";import{E as me}from"./el-button-DH2aoNQY.js";import{b as fe,a as _e,E as ve}from"./el-form-item-CsDD6m2w.js";import{E as he}from"./xlsx-Doocrq3z.js";import{_ as ye}from"./myText-CRXRCdtz.js";import{_ as xe,f as s,l as we,k as be,o as ge,g as Se,a as t,j as B,b as l,w as a,t as d,q as m,m as ke,v as ze,n as W,p as Le,d as Te}from"./index-DXXEKAtq.js";import{u as Ee}from"./base-C_VRbplz.js";import{g as Ie}from"./excel2-9vkhixxD.js";import{i as $}from"./index-UhZta3NQ.js";import"./index-H5_ERi_W.js";const r=g=>(Le("data-v-44962ea1"),g=g(),Te(),g),Be={class:"box"},Ve={class:"left"},Fe=r(()=>t("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"第一步",-1)),Ce=r(()=>t("br",null,null,-1)),Me=r(()=>t("br",null,null,-1)),Pe=r(()=>t("p",null,"判断依据：连续30个时间段流量变化小于1m³/h（可以手动修改）",-1)),Ne=r(()=>t("br",null,null,-1)),Ue={class:"leftMiddle"},Xe=r(()=>t("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"第二步",-1)),Ye={style:{display:"flex","justify-content":"space-between"}},Ae={style:{width:"100%",flex:"1"}},De=r(()=>t("div",{style:{"font-size":"20px","font-weight":"700"}},"观测孔数据:",-1)),Ge=r(()=>t("br",null,null,-1)),je={class:"leftBottom"},Qe=r(()=>t("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"参数选取",-1)),qe={style:{display:"flex","justify-content":"space-between","font-size":"16px"}},Oe={style:{flex:"3"}},We={style:{flex:"2"}},$e={style:{flex:"2"}},Ke={style:{flex:"2"}},Ze=r(()=>t("sup",null,"2",-1)),He={class:"leftBottom"},Je=r(()=>t("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"计算结果",-1)),Re={style:{display:"flex","justify-content":"space-between","font-size":"16px"}},et={style:{flex:"1"}},tt={style:{flex:"1"}},ot={style:{flex:"1"}},lt={class:"middle"},nt=r(()=>t("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"配线法",-1)),st={__name:"steadyNo",setup(g){const K=Ee(),z=s(),v=s(),V=K.St,F=s([0,0]),C=s(),u=s(!1),M=s([]),Z=()=>{F.value=V.find((o,e)=>{const n=V.slice(e,e+30),f=n.map(i=>i[2]).reduce((i,_)=>i+_)/n.length;return v.value=f.toFixed(2),C.value=n[29][1],n.map(i=>i[2]).every(i=>Math.abs(i-f)<2)})},H=async o=>(c.value=await Ie(o),M.value=c.value.map(e=>[e.t/Math.pow(e.r,2),e.s]),!1),P=s(!1),c=s([]),J=o=>{const e=c.value.findIndex(n=>n.rsid===o.rsid);c.value.splice(e,1)},R=()=>{c.value.push({rsid:c.value.length+1,r:0,s:0,t:0})},L=s([]),T=s([1]),y=s([]),ee=[.2194,.2602,.3106,.3738,.4544,.5598,.7024,.9057,1.2227,1.8229,1.9187,2.0269,2.1508,2.2953,2.4679,2.6813,2.9591,3.3547,4.0379];for(let o=1;o<=6;o++)for(let e=9;e>0;e--)T.value.push(e/Math.pow(10,o));y.value=T.value.map(o=>+(-.577216-Math.log(o)).toFixed(4)),y.value.splice(0,19),y.value=[...ee,...y.value],L.value=T.value.map((o,e)=>[1/o,y.value[e]]),console.log(L.value);const N=(o,e)=>{const n=$(document.getElementById("biaozhun"));return n.setOption({title:{text:"Theis标准曲线",left:"center",top:10,textStyle:{fontSize:24}},xAxis:{type:"log",name:"1/u",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"black"},axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"black",width:.5}},axisLine:{lineStyle:{color:"black",width:2}},axisLabel:{color:"black",fontSize:16},splitLine:{show:!0,lineStyle:{color:"black",width:.5}}},yAxis:{type:"log",logBase:10,axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"black",width:.5}},name:"w(u)",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"black"},axisLine:{lineStyle:{color:"black",width:2}},axisLabel:{color:"black",fontSize:16},splitLine:{show:!0,lineStyle:{color:"black",width:.5}}},series:[{data:L.value,type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"black",width:2}}]}),n.convertFromPixel({seriesIndex:0},[o,e])},te=()=>{const o=document.getElementById("rs"),e=$(o);e.setOption({title:{text:"实际观测孔r-s散点图",left:"center",top:10,textStyle:{fontSize:24,color:"red"}},xAxis:{type:"log",name:"t/r²",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"red"},axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"red",width:.5}},axisLine:{lineStyle:{color:"red",width:2}},axisLabel:{color:"red",fontSize:16},splitLine:{show:!0,lineStyle:{color:"red",width:.5}}},yAxis:{type:"log",min:.01,logBase:10,axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"red",width:.5}},name:"s",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"red"},axisLine:{lineStyle:{color:"red",width:2}},axisLabel:{color:"red",fontSize:16},splitLine:{show:!0,lineStyle:{color:"red",width:.5}}},series:[{data:M.value,type:"scatter"}]}),e.getZr().on("click",n=>{const f=[n.offsetX,n.offsetY];if(e.containPixel("grid",f)){let i=e.convertFromPixel({seriesIndex:0},[n.offsetX,n.offsetY]);u.value&&([I.value,w.value]=[...i])}})},U=s({x:0,y:0}),oe=o=>{U.value={x:o.layerX,y:o.layerY}};we(()=>U.value,o=>{u.value&&([x.value,E.value]=[...N(o.x,o.y)])});const X=s(0),Y=s(0),A=s(0),D=s(0),x=s(),E=s(),w=s(),I=s();be(()=>{N(),document.querySelector(".echarts").addEventListener("mousemove",n=>{u.value&&(A.value=n.layerX,D.value=n.layerY)});const e=document.getElementById("rs");le(e)});function le(o){o.onmousedown=function(e){e=e||window.event;var n=e.clientX-o.offsetLeft,f=e.clientY-o.offsetTop;return document.onmousemove=function(i){i=i||window.event;var _=i.clientX-n,h=i.clientY-f;X.value=_,Y.value=h},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null},!1}}return(o,e)=>{var j,Q,q,O;const n=me,f=ye,i=he,_=_e,h=ve,G=fe,b=de,ne=pe,se=ue,ae=ce,ie=re;return ge(),Se("div",Be,[t("div",Ve,[t("div",{class:B(["leftTop",{leftTopzhedie:!P.value}])},[Fe,l(n,{type:"primary",onClick:Z},{default:a(()=>[m("流量稳定时段读取")]),_:1}),l(f,{onChangeIszhankai:e[0]||(e[0]=p=>P.value=p)},{context:a(()=>[t("p",null,"流量："+d(v.value)+"m³/h",1),Ce,t("p",null,"时间："+d(F.value[1])+"~"+d(C.value)+"h",1),Me,Pe,Ne]),_:1})],2),t("div",Ue,[Xe,t("div",Ye,[l(i,{action:"#","before-upload":H,"show-file-list":!1,accept:".xlsx, .xls"},{trigger:a(()=>[l(n,{type:"primary",style:{"margin-bottom":"10px",width:"150px"}},{default:a(()=>[m("导入观测孔数据")]),_:1})]),_:1}),l(n,{type:"primary",onClick:te,style:{"margin-bottom":"10px"}},{default:a(()=>[m("绘制散点图")]),_:1}),t("div",null,[l(n,{type:"primary",onClick:e[1]||(e[1]=p=>u.value=!u.value),style:{"margin-bottom":"10px",width:"130px"}},{default:a(()=>[m("开启选点："+d(u.value.toString().toUpperCase()),1)]),_:1})])]),l(G,null,{default:a(()=>[l(h,{label:"流量："},{default:a(()=>[l(_,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=p=>v.value=p),type:"number",placeholder:"稳定时刻流量（m³/h）"},null,8,["modelValue"])]),_:1}),l(h,{label:"厚度："},{default:a(()=>[l(_,{modelValue:z.value,"onUpdate:modelValue":e[3]||(e[3]=p=>z.value=p),type:"number",placeholder:"含水层厚度（m）"},null,8,["modelValue"])]),_:1})]),_:1}),t("div",Ae,[De,l(ae,{data:c.value,style:{width:"100%"},border:""},{default:a(()=>[l(b,{prop:"rsid",label:"序号",width:"60",align:"center"}),l(b,{prop:"r",label:"r /m",width:"70",align:"center","show-overflow-tooltip":""}),l(b,{prop:"s",label:"s /m",width:"70",align:"center","show-overflow-tooltip":""}),l(b,{prop:"t",label:"t /h",width:"70",align:"center","show-overflow-tooltip":""}),l(b,{label:"操作",align:"center"},{default:a(({row:p,$index:S})=>[l(ne,{width:"220","confirm-button-text":"确定","cancel-button-text":"取消","confirm-button-type":"danger",title:"确定要删除此处的数据吗？",onConfirm:k=>J(p)},{reference:a(()=>[l(n,{type:"danger"},{default:a(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"]),l(se,{placement:"right",title:"观测孔"+p.rsid,width:200,trigger:"click"},{reference:a(()=>[l(n,{type:"primary"},{default:a(()=>[m("修改")]),_:1})]),default:a(()=>[l(G,null,{default:a(()=>[l(h,{label:"r:"},{default:a(()=>[l(_,{type:"number",modelValue:c.value[S].r,"onUpdate:modelValue":k=>c.value[S].r=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(h,{label:"s:"},{default:a(()=>[l(_,{type:"number",modelValue:c.value[S].s,"onUpdate:modelValue":k=>c.value[S].s=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1},8,["data"]),Ge,l(n,{onClick:R},{default:a(()=>[m("添加观测孔")]),_:1})])]),t("div",je,[Qe,t("div",qe,[t("p",Oe,"W(u):"+d((j=x.value)==null?void 0:j.toFixed(4)),1),t("p",We,"1/u:"+d((Q=E.value)==null?void 0:Q.toFixed(4)),1),t("p",$e,"s:"+d((q=w.value)==null?void 0:q.toFixed(4)),1),t("p",Ke,[m("t/r"),Ze,m(":"+d((O=I.value)==null?void 0:O.toFixed(4)),1)])])]),t("div",He,[Je,t("div",Re,[t("p",et,"T:"+d((x.value*v.value/(4*Math.PI*w.value)).toFixed(4)),1),t("p",tt,"K:"+d((x.value*v.value/(4*Math.PI*w.value*z.value)).toFixed(4)),1),t("p",ot,"S:"+d((x.value*v.value/(4*Math.PI*w.value)/E.value*I.value).toFixed(4)),1)])])]),t("div",lt,[nt,t("div",{class:"echarts",onClick:oe},[ke(l(ie,{name:"dingzi",size:"40px",color:"red",style:W([{position:"absolute","z-index":"6","pointer-events":"none",transform:"translate(-50%,-100%)"},{top:D.value,left:A.value}])},null,8,["style"]),[[ze,u.value]]),t("div",{id:"rs",style:W({transform:`translate(${X.value}px, ${Y.value}px)`}),class:B({disShubiao:u.value})},null,6),t("div",{id:"biaozhun",class:B({disShubiao:u.value})},null,2)])])])}}},bt=xe(st,[["__scopeId","data-v-44962ea1"]]);export{bt as default};
