import{_ as le}from"./mySvg-BAb26n4i.js";import"./base-DCR-srJH.js";import{a as ne,E as se}from"./el-table-column-jx3zlAUW.js";import"./el-tag-X1nkXYty.js";import{E as ae}from"./el-popover-DSXgb_t4.js";import{E as ie}from"./el-popconfirm-uMIcenjg.js";import{E as re}from"./el-button-Bq2H2uQq.js";import{b as ce,a as ue,E as de}from"./el-form-item-CnNy_IUl.js";import{E as pe}from"./xlsx-hAQHtCkf.js";import{_ as me}from"./myText-DME5_Nvl.js";import{_ as fe,f as i,l as _e,k as ve,o as he,g as xe,a as e,j as L,b as o,w as a,t as r,m as ye,v as be,n as D,q as v,p as we,d as ge}from"./index-C25Dgq6U.js";import{u as Se}from"./base-BAhzZpx8.js";import{g as ke}from"./excel2-CXfS9G_b.js";import{i as K}from"./index-UhZta3NQ.js";import"./index-BIhnBTXK.js";const c=b=>(we("data-v-8e5d44f7"),b=b(),ge(),b),ze={class:"box"},Be={class:"left"},Le=c(()=>e("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"第一步",-1)),Ee=c(()=>e("br",null,null,-1)),Te=c(()=>e("br",null,null,-1)),Ie=c(()=>e("br",null,null,-1)),Ve=c(()=>e("p",null,"判断依据：稳定时刻降深收敛差距小于2m（可以手动修改）",-1)),Fe=c(()=>e("br",null,null,-1)),Ce={class:"leftMiddle"},Pe=c(()=>e("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"第二步",-1)),Ue={style:{display:"flex","justify-content":"space-between"}},Ye={style:{width:"100%",flex:"1"}},Me=c(()=>e("div",{style:{"font-size":"20px","font-weight":"700"}},"观测孔数据:",-1)),Ne=c(()=>e("br",null,null,-1)),Xe={class:"leftBottom"},je=c(()=>e("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"参数选取",-1)),Ae={style:{display:"flex","justify-content":"space-between","font-size":"16px"}},Ge={style:{flex:"3"}},De={style:{flex:"2"}},Ke={style:{flex:"2"}},Oe={style:{flex:"2"}},qe={class:"leftBottom"},$e=c(()=>e("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"计算结果",-1)),Qe={style:{display:"flex","justify-content":"space-between","font-size":"16px"}},Ze={style:{flex:"1"}},He={style:{flex:"1"}},Je={style:{flex:"1"}},Re={style:{flex:"1"}},We={class:"middle"},et=c(()=>e("div",{style:{"font-size":"30px","font-weight":"bolder",margin:"10px 0"}},"配线法",-1)),tt={__name:"steadyYue",setup(b){const O=Se(),B=i(),_=i(),E=O.St,T=i([0,0]),I=i();i();const p=i(!1),q=()=>{T.value=E.find((n,l)=>{const t=E.slice(l),f=t.map(s=>s[0]).reduce((s,d)=>s+d)/t.length;return I.value=f.toFixed(2),_.value=(t.map(s=>s[2]).reduce((s,d)=>s+d)/t.length).toFixed(2),t.map(s=>s[0]).every(s=>Math.abs(s-f)<2)})},$=async n=>(u.value=await ke(n),!1),V=i(!1),u=i([]),Q=n=>{const l=u.value.findIndex(t=>t.rsid===n.rsid);u.value.splice(l,1)},Z=()=>{u.value.push({rsid:u.value.length+1,r:0,s:0})},F=(n,l)=>{const t=K(document.getElementById("biaozhun"));return t.setOption({title:{text:"越流含水层稳定流抽水试验的标准曲线",left:"center",top:10,textStyle:{fontSize:24}},xAxis:{type:"log",name:"r/B",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"black"},axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"black",width:.5}},axisLine:{lineStyle:{color:"black",width:2}},axisLabel:{color:"black",fontSize:16},splitLine:{show:!0,lineStyle:{color:"black",width:.5}}},yAxis:{type:"log",min:.01,logBase:10,axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"black",width:.5}},name:"K0(r/B)",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"black"},axisLine:{lineStyle:{color:"black",width:2}},axisLabel:{color:"black",fontSize:16},splitLine:{show:!0,lineStyle:{color:"black",width:.5}}},series:[{data:[[.01,4.7212],[.02,4.0285],[.03,3.6235],[.04,3.3365],[.05,3.1142],[.06,2.9329],[.07,2.7798],[.08,2.6475],[.09,2.531],[.1,2.4271],[.2,1.7527],[.3,1.3725],[.4,1.1145],[.5,.9244],[.6,.7775],[.7,.6605],[.8,.5663],[.9,.4867],[1,.421],[1.5,.2138],[2,.1139],[2.5,.0624],[3,.0347],[3.5,.0196],[4,.0112],[4.5,.0064],[5,.0037]],type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"black",width:2}}]}),t.convertFromPixel({seriesIndex:0},[n,l])},H=()=>{const n=document.getElementById("rs"),l=K(n);l.setOption({title:{text:"实际观测孔r-s曲线",left:"center",top:10,textStyle:{fontSize:24,color:"blue"}},xAxis:{type:"log",name:"r",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"blue"},axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"blue",width:.5}},axisLine:{lineStyle:{color:"blue",width:2}},axisLabel:{color:"blue",fontSize:16},splitLine:{show:!0,lineStyle:{color:"blue",width:.5}}},yAxis:{type:"log",min:.01,logBase:10,axisTick:{show:!1},minorTick:{show:!1,splitNumber:10},minorSplitLine:{show:!0,lineStyle:{color:"blue",width:.5}},name:"s",nameLocation:"center",nameGap:30,nameTextStyle:{fontSize:20,color:"blue"},axisLine:{lineStyle:{color:"blue",width:2}},axisLabel:{color:"blue",fontSize:16},splitLine:{show:!0,lineStyle:{color:"blue",width:.5}}},series:[{data:u.value.map(t=>Object.values(t).splice(1,2)),type:"scatter"}]}),l.getZr().on("click",t=>{const f=[t.offsetX,t.offsetY];if(l.containPixel("grid",f)){let s=l.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY]);p.value&&([g.value,y.value]=[...s])}})},C=i({x:0,y:0}),J=n=>{C.value={x:n.layerX,y:n.layerY}};_e(()=>C.value,n=>{p.value&&([x.value,w.value]=[...F(n.x,n.y)])});const P=i(0),U=i(0),Y=i(0),M=i(0),x=i(),w=i(),y=i(),g=i();ve(()=>{F(),document.querySelector(".echarts").addEventListener("mousemove",t=>{p.value&&(Y.value=t.layerX,M.value=t.layerY)});const l=document.getElementById("rs");R(l)});function R(n){n.onmousedown=function(l){l=l||window.event;var t=l.clientX-n.offsetLeft,f=l.clientY-n.offsetTop;return document.onmousemove=function(s){s=s||window.event;var d=s.clientX-t,h=s.clientY-f;P.value=d,U.value=h},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null},!1}}return(n,l)=>{var X,j,A,G;const t=re,f=me,s=pe,d=ue,h=de,N=ce,S=se,W=ie,ee=ae,te=ne,oe=le;return he(),xe("div",ze,[e("div",Be,[e("div",{class:L(["leftTop",{leftTopzhedie:!V.value}])},[Le,o(t,{type:"primary",onClick:q},{default:a(()=>[v("稳定时段获取")]),_:1}),o(f,{onChangeIszhankai:l[0]||(l[0]=m=>V.value=m)},{context:a(()=>[e("p",null,"降深："+r(I.value)+"m",1),Ee,e("p",null,"流量："+r(_.value)+"m³/h",1),Te,e("p",null,"时间："+r(T.value[1])+"h",1),Ie,Ve,Fe]),_:1})],2),e("div",Ce,[Pe,e("div",Ue,[o(s,{action:"#","before-upload":$,"show-file-list":!1,accept:".xlsx, .xls"},{trigger:a(()=>[o(t,{type:"primary",style:{"margin-bottom":"10px",width:"150px"}},{default:a(()=>[v("导入观测孔 r-s 数据")]),_:1})]),_:1}),o(t,{type:"primary",onClick:H,style:{"margin-bottom":"10px"}},{default:a(()=>[v("绘制rs散点图")]),_:1}),e("div",null,[o(t,{type:"primary",onClick:l[1]||(l[1]=m=>p.value=!p.value),style:{"margin-bottom":"10px",width:"130px"}},{default:a(()=>[v("开启选点："+r(p.value.toString().toUpperCase()),1)]),_:1})])]),o(N,null,{default:a(()=>[o(h,{label:"流量："},{default:a(()=>[o(d,{modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=m=>_.value=m),type:"number",placeholder:"稳定时刻流量（m³/h）"},null,8,["modelValue"])]),_:1}),o(h,{label:"厚度："},{default:a(()=>[o(d,{modelValue:B.value,"onUpdate:modelValue":l[3]||(l[3]=m=>B.value=m),type:"number",placeholder:"含水层厚度（m）"},null,8,["modelValue"])]),_:1})]),_:1}),e("div",Ye,[Me,o(te,{data:u.value,style:{width:"100%"},border:""},{default:a(()=>[o(S,{prop:"rsid",label:"序号",width:"60",align:"center"}),o(S,{prop:"r",label:"主井距r /m",width:"110",align:"center","show-overflow-tooltip":""}),o(S,{prop:"s",label:"降深s /m",width:"110",align:"center","show-overflow-tooltip":""}),o(S,{label:"操作",align:"center"},{default:a(({row:m,$index:k})=>[o(W,{width:"220","confirm-button-text":"确定","cancel-button-text":"取消","confirm-button-type":"danger",title:"确定要删除此处的数据吗？",onConfirm:z=>Q(m)},{reference:a(()=>[o(t,{type:"danger"},{default:a(()=>[v("删除")]),_:1})]),_:2},1032,["onConfirm"]),o(ee,{placement:"right",title:"观测孔"+m.rsid,width:200,trigger:"click"},{reference:a(()=>[o(t,{type:"primary"},{default:a(()=>[v("修改")]),_:1})]),default:a(()=>[o(N,null,{default:a(()=>[o(h,{label:"r:"},{default:a(()=>[o(d,{type:"number",modelValue:u.value[k].r,"onUpdate:modelValue":z=>u.value[k].r=z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(h,{label:"s:"},{default:a(()=>[o(d,{type:"number",modelValue:u.value[k].s,"onUpdate:modelValue":z=>u.value[k].s=z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:1})]),_:1},8,["data"]),Ne,o(t,{onClick:Z},{default:a(()=>[v("添加观测孔")]),_:1})])]),e("div",Xe,[je,e("div",Ae,[e("p",Ge,"K0(r/B):"+r((X=x.value)==null?void 0:X.toFixed(4)),1),e("p",De,"r/B:"+r((j=w.value)==null?void 0:j.toFixed(4)),1),e("p",Ke,"s:"+r((A=y.value)==null?void 0:A.toFixed(4)),1),e("p",Oe,"r:"+r((G=g.value)==null?void 0:G.toFixed(4)),1)])]),e("div",qe,[$e,e("div",Qe,[e("p",Ze,"T:"+r((x.value*_.value/(2*Math.PI*y.value)).toFixed(4)),1),e("p",He,"K:"+r((x.value*_.value/(2*Math.PI*y.value*B.value)).toFixed(4)),1),e("p",Je,"B:"+r((g.value/w.value).toFixed(4)),1),e("p",Re,"σ:"+r((x.value*_.value/(2*Math.PI*y.value)/(g.value/w.value)).toFixed(4)),1)])])]),e("div",We,[et,e("div",{class:"echarts",onClick:J},[ye(o(oe,{name:"dingzi",size:"40px",color:"red",style:D([{position:"absolute","z-index":"6","pointer-events":"none",transform:"translate(-50%,-100%)"},{top:M.value,left:Y.value}])},null,8,["style"]),[[be,p.value]]),e("div",{id:"rs",style:D({transform:`translate(${P.value}px, ${U.value}px)`}),class:L({disShubiao:p.value})},null,6),e("div",{id:"biaozhun",class:L({disShubiao:p.value})},null,2)])])])}}},ht=fe(tt,[["__scopeId","data-v-8e5d44f7"]]);export{ht as default};
