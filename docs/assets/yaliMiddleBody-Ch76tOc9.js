import"./base-BTlVFyY3.js";import{b as I}from"./Index-CdlF-dbX.js";/* empty css                 */import{f as C,S as $,a9 as N,a1 as D,s as q,D as k,w as R,m as w,b as Z,v as j,T as G,V as F,Q,C as O,K,aa as H,_ as Y,k as J,o as U,g as W,a as _}from"./index-DXXEKAtq.js";import{E as X}from"./index-BjdqnW97.js";import{u as ee}from"./base-C_VRbplz.js";import{i as A,L as P}from"./index-UhZta3NQ.js";import{F as te,r as z,d as ae,g as S,e as V}from"./index-H5_ERi_W.js";function oe(t){let e;const o=C(!1),a=$({...t,originalPosition:"",originalOverflow:"",visible:!1});function c(s){a.text=s}function r(){const s=a.parent,d=n.ns;if(!s.vLoadingAddClassList){let f=s.getAttribute("loading-number");f=Number.parseInt(f)-1,f?s.setAttribute("loading-number",f.toString()):(z(s,d.bm("parent","relative")),s.removeAttribute("loading-number")),z(s,d.bm("parent","hidden"))}v(),u.unmount()}function v(){var s,d;(d=(s=n.$el)==null?void 0:s.parentNode)==null||d.removeChild(n.$el)}function p(){var s;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=window.setTimeout(h,400),a.visible=!1,(s=t.closed)==null||s.call(t))}function h(){if(!o.value)return;const s=a.parent;o.value=!1,s.vLoadingAddClassList=void 0,r()}const l=q({name:"ElLoading",setup(s,{expose:d}){const{ns:f,zIndex:y}=te("loading");return d({ns:f,zIndex:y}),()=>{const b=a.spinner||a.svg,x=k("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...b?{innerHTML:b}:{}},[k("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),m=a.text?k("p",{class:f.b("text")},[a.text]):void 0;return k(G,{name:f.b("fade"),onAfterLeave:h},{default:R(()=>[w(Z("div",{style:{backgroundColor:a.background||""},class:[f.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[k("div",{class:f.b("spinner")},[x,m])]),[[j,a.visible]])])})}}}),u=N(l),n=u.mount(document.createElement("div"));return{...D(a),setText:c,removeElLoadingChild:v,close:p,handleAfterLeave:h,vm:n,get $el(){return n.$el}}}let L;const se=function(t={}){if(!ae)return;const e=re(t);if(e.fullscreen&&L)return L;const o=oe({...e,closed:()=>{var c;(c=e.closed)==null||c.call(e),e.fullscreen&&(L=void 0)}});le(e,e.parent,o),E(e,e.parent,o),e.parent.vLoadingAddClassList=()=>E(e,e.parent,o);let a=e.parent.getAttribute("loading-number");return a?a=`${Number.parseInt(a)+1}`:a="1",e.parent.setAttribute("loading-number",a),e.parent.appendChild(o.$el),F(()=>o.visible.value=e.visible),e.fullscreen&&(L=o),o},re=t=>{var e,o,a,c;let r;return Q(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(a=t.lock)!=null?a:!1,customClass:t.customClass||"",visible:(c=t.visible)!=null?c:!0,target:r}},le=async(t,e,o)=>{const{nextZIndex:a}=o.vm.zIndex||o.vm._.exposed.zIndex,c={};if(t.fullscreen)o.originalPosition.value=S(document.body,"position"),o.originalOverflow.value=S(document.body,"overflow"),c.zIndex=a();else if(t.parent===document.body){o.originalPosition.value=S(document.body,"position"),await F();for(const r of["top","left"]){const v=r==="top"?"scrollTop":"scrollLeft";c[r]=`${t.target.getBoundingClientRect()[r]+document.body[v]+document.documentElement[v]-Number.parseInt(S(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])c[r]=`${t.target.getBoundingClientRect()[r]}px`}else o.originalPosition.value=S(e,"position");for(const[r,v]of Object.entries(c))o.$el.style[r]=v},E=(t,e,o)=>{const a=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?z(e,a.bm("parent","relative")):V(e,a.bm("parent","relative")),t.fullscreen&&t.lock?V(e,a.bm("parent","hidden")):z(e,a.bm("parent","hidden"))},B=Symbol("ElLoading"),M=(t,e)=>{var o,a,c,r;const v=e.instance,p=s=>O(e.value)?e.value[s]:void 0,h=s=>{const d=Q(s)&&(v==null?void 0:v[s])||s;return d&&C(d)},l=s=>h(p(s)||t.getAttribute(`element-loading-${H(s)}`)),u=(o=p("fullscreen"))!=null?o:e.modifiers.fullscreen,n={text:l("text"),svg:l("svg"),svgViewBox:l("svgViewBox"),spinner:l("spinner"),background:l("background"),customClass:l("customClass"),fullscreen:u,target:(a=p("target"))!=null?a:u?void 0:t,body:(c=p("body"))!=null?c:e.modifiers.body,lock:(r=p("lock"))!=null?r:e.modifiers.lock};t[B]={options:n,instance:se(n)}},ne=(t,e)=>{for(const o of Object.keys(e))K(e[o])&&(e[o].value=t[o])},ie={mounted(t,e){e.value&&M(t,e)},updated(t,e){const o=t[B];e.oldValue!==e.value&&(e.value&&!e.oldValue?M(t,e):e.value&&e.oldValue?O(e.value)&&ne(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[B])==null||e.instance.close(),t[B]=null}},T=t=>{const e={distance:t.distance,diameter:t.diameter,k:0,b:0};switch(t.distance+t.diameter){case 164:e.k=27.32,e.b=.26;break;case 166:e.k=31.284,e.b=.2983;break;case 168:e.k=49.713,e.b=.6157;break;case 172:e.k=108.45,e.b=2.088;break;case 204:e.k=23.965,e.b=.3526;break;case 206:e.k=30.091,e.b=.3697;break;case 208:e.k=41.976,e.b=.5744;break;case 210:e.k=54.93,e.b=.8853;break;case 212:e.k=82.883,e.b=1.5553;break;case 244:e.k=16.283,e.b=.1952;break;case 246:e.k=27.403,e.b=.4438;break;case 248:e.k=36.023,e.b=.5435;break;case 250:e.k=48.444,e.b=.8412;break;case 252:e.k=71.05,e.b=1.007;break;case 284:e.k=16.04,e.b=.2652;break;case 286:e.k=22.279,e.b=.4185;break;case 288:e.k=33.442,e.b=.6311;break;case 290:e.k=46.06,e.b=.985;break;default:X.error("仪器规格错误,请重新选择");return}return e},ce={class:"body"},ue={class:"echarts",id:"echartBoxQt"},de={class:"echarts",id:"echartBoxSt"},me={class:"echarts",id:"echartBoxQS"},be={class:"echarts",id:"echartBoxqS"},fe={__name:"yaliMiddleBody",setup(t,{expose:e}){const o=ee(),a=C({}),c=C(!1);J(()=>{I.on("InstrumentData",l=>{a.value=T(l)}),I.on("getBaseFig",()=>{a.value=T(o.parameter),r()}),o.testData.length>0&&(a.value=T(o.parameter),r())});const r=()=>{c.value=!0;const l=o.testData.map(s=>s.P1),u=o.testData.map(s=>s.P2),n=o.testData.map(s=>s.t);v(l,u,n),p(l,u,n),h(l,u),setTimeout(()=>{c.value=!1},200)},v=(l,u,n)=>{window.onresize=function(){d.resize()};const s=document.getElementById("echartBoxQt"),d=A(s),y=l.map((b,x)=>Math.sqrt(Math.abs(b-u[x]))).map(b=>a.value.k*b-a.value.b);d.setOption({title:{text:"Q-t曲线图",textStyle:{color:"black",fontSize:20},top:3},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,top:28,right:20,feature:{dataZoom:{show:!0},dataView:{readOnly:!1},magicType:{type:["line","bar"]},saveAsImage:{}}},grid:{left:"3%",right:"3%",bottom:"3%",top:"16%",containLabel:!0},xAxis:{interval:24,axisLine:{show:!0,linestyle:{color:"black"}},axisTick:{show:!1},axisLabel:{formatter:b=>b+"时",textStyle:{color:"black",fontSize:14}}},yAxis:{type:"value",name:"流量/(m³/h)",nameLocation:"end",nameTextStyle:{fontSize:14},axisLine:{show:!0,linestyle:{color:"black"}},axisTick:{show:!1},axisLabel:{formatter:b=>b?b.toFixed(1):0,textStyle:{color:"black",fontSize:14}}},series:[{name:"流量：",data:y.map((b,x)=>[n[x].toFixed(0),b.toFixed(2)]),type:"line",showSymbol:!0,symbolSize:6,smooth:!0,areaStyle:{opacity:.8,color:new P(0,0,0,1,[{offset:0,color:"rgb(128, 255, 165)"},{offset:1,color:"rgb(1, 191, 236)"}])}}]})},p=(l,u,n)=>{window.onresize=function(){d.resize()};const s=document.getElementById("echartBoxSt"),d=A(s),y=l.map((i,g)=>Math.sqrt(Math.abs(i-u[g]))).map(i=>a.value.k*i-a.value.b),b=Math.pow(a.value.diameter/2e3,2)*Math.PI,m=y.map(i=>i/b/3600).map((i,g)=>i**2/19.6+(l[g]+u[g])/.0098);o.St=m.map((i,g)=>[i,n[g],y[g]]),d.setOption({title:{text:"S-t曲线图",textStyle:{color:"black",fontSize:20},top:3},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,top:28,right:20,feature:{dataZoom:{show:!0},dataView:{readOnly:!1},magicType:{type:["line","bar"]},saveAsImage:{}}},grid:{left:"3%",right:"3%",bottom:"3%",top:"16%",containLabel:!0},xAxis:{interval:24,axisLine:{show:!0,linestyle:{color:"black"}},axisTick:{show:!1},axisLabel:{formatter:i=>i+"时",textStyle:{color:"black",fontSize:14}}},yAxis:{type:"value",name:"降升/m",nameLocation:"end",nameTextStyle:{fontSize:14},axisLine:{show:!0,linestyle:{color:"black"}},axisTick:{show:!1},axisLabel:{formatter:i=>i?i.toFixed(1):0,textStyle:{color:"black",fontSize:14}}},series:[{name:"流量：",data:m.map((i,g)=>[n[g].toFixed(0),i.toFixed(2)]),type:"line",showSymbol:!0,symbolSize:6,smooth:!0,areaStyle:{opacity:.8,color:new P(0,0,0,1,[{offset:0,color:"rgb(128, 255, 165)"},{offset:1,color:"rgb(1, 191, 236)"}])}}]})},h=(l,u)=>{window.onresize=function(){s.resize()};const n=document.getElementById("echartBoxQS"),s=A(n),f=l.map((m,i)=>Math.sqrt(Math.abs(m-u[i]))).map(m=>a.value.k*m-a.value.b),y=Math.pow(a.value.diameter/2e3,2)*Math.PI,x=f.map(m=>m/y/3600).map((m,i)=>m**2/19.6+(l[i]+u[i])/.0098);console.log(x),s.setOption({title:{text:"Q-S散点图",textStyle:{color:"black",fontSize:20},top:3},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,top:28,right:20,feature:{dataZoom:{show:!0},dataView:{readOnly:!1},saveAsImage:{}}},grid:{left:"3%",right:"3%",bottom:"3%",top:"16%",containLabel:!0},xAxis:{axisTick:{show:!1},axisLabel:{textStyle:{color:"black",fontSize:14}}},yAxis:{type:"value",nameLocation:"end",nameTextStyle:{fontSize:14},axisLine:{show:!0,linestyle:{color:"black"}},axisTick:{show:!1},axisLabel:{formatter:m=>m?m.toFixed(1):0,textStyle:{color:"black",fontSize:14}}},series:[{data:x.map((m,i)=>[m.toFixed(2),f[i].toFixed(2)]),type:"scatter",showSymbol:!0,symbolSize:10,smooth:!0}]})};return e({getEcharts:r}),(l,u)=>{const n=ie;return U(),W("div",ce,[w(_("div",ue,null,512),[[n,c.value]]),w(_("div",de,null,512),[[n,c.value]]),w(_("div",me,null,512),[[n,c.value]]),w(_("div",be,null,512),[[n,c.value]])])}}},we=Y(fe,[["__scopeId","data-v-dc10caa1"]]);export{we as default};
